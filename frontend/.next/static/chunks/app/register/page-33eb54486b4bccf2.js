(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{5361:function(e,t,r){Promise.resolve().then(r.bind(r,7726))},7726:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var a=r(7437),i=r(2265),l=r(9376),n=r(4210),s=r(1840),o=r(4938),c=r(2023),d=r(3389),u=r(1150),p=r(2369),m=r(8997);let h=(0,r(9205).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var x=r(9345),f=r(6337),y=r(7648),b=r(9116);function g(){let[e,t]=(0,i.useState)(""),[r,g]=(0,i.useState)(""),[v,j]=(0,i.useState)(""),[w,k]=(0,i.useState)(null),[N,S]=(0,i.useState)(""),[C,E]=(0,i.useState)(""),[Z,I]=(0,i.useState)(""),[O,_]=(0,i.useState)(null),[P,T]=(0,i.useState)(""),[J,H]=(0,i.useState)(!1),{register:M}=(0,n.a)(),A=(0,l.useRouter)(),L=async t=>{if(t.preventDefault(),T(""),!w){T("Veuillez s\xe9lectionner un r\xf4le");return}if(r!==v){T("Les mots de passe ne correspondent pas");return}if(r.length<6){T("Le mot de passe doit contenir au moins 6 caract\xe8res");return}if("jobseeker"===w&&(!N||!C||!Z||!O)){T("Veuillez remplir tous les champs et t\xe9l\xe9charger votre CV");return}H(!0);try{if(!await M(e,r,w))throw Error("Cet email est d\xe9j\xe0 utilis\xe9");if("jobseeker"===w&&O){let e=new FormData;e.append("file",O),e.append("name",N),e.append("gender",C),e.append("interested_domain",Z);let t=await (0,b.uv)(e),r=JSON.parse(localStorage.getItem("user")||"{}");r.backendId=t.user_id,localStorage.setItem("user",JSON.stringify(r))}"recruiter"===w?A.push("/recruiter/swipe"):A.push("/jobseeker/swipe")}catch(e){T(e.message||"Une erreur est survenue")}finally{H(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen flex items-center justify-center p-4 py-12",children:[(0,a.jsx)(s.E.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>A.push("/"),className:"fixed top-4 left-4 p-3 bg-white rounded-full shadow-lg hover:shadow-xl transition-shadow z-50",title:"Retour \xe0 l'accueil",children:(0,a.jsx)(o.Z,{className:"w-5 h-5 text-purple-600"})}),(0,a.jsx)(s.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl p-8 border border-purple-100",children:[(0,a.jsxs)(s.E.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl mb-4 shadow-lg",children:(0,a.jsx)(c.Z,{className:"w-10 h-10 text-white"})}),(0,a.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"FairMatch"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Cr\xe9ez votre compte"})]}),(0,a.jsxs)("form",{onSubmit:L,className:"space-y-6",children:[(0,a.jsxs)(s.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Je suis un(e)..."}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)(s.E.div,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>k("recruiter"),className:"p-4 rounded-xl border-2 cursor-pointer transition-all ".concat("recruiter"===w?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-purple-200"),children:[(0,a.jsx)(d.Z,{className:"w-6 h-6 mx-auto mb-2 ".concat("recruiter"===w?"text-purple-600":"text-gray-400")}),(0,a.jsx)("p",{className:"text-sm font-semibold text-center ".concat("recruiter"===w?"text-purple-600":"text-gray-600"),children:"Recruteur"})]}),(0,a.jsxs)(s.E.div,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>k("jobseeker"),className:"p-4 rounded-xl border-2 cursor-pointer transition-all ".concat("jobseeker"===w?"border-pink-500 bg-pink-50":"border-gray-200 hover:border-pink-200"),children:[(0,a.jsx)(u.Z,{className:"w-6 h-6 mx-auto mb-2 ".concat("jobseeker"===w?"text-pink-600":"text-gray-400")}),(0,a.jsx)("p",{className:"text-sm font-semibold text-center ".concat("jobseeker"===w?"text-pink-600":"text-gray-600"),children:"Candidat"})]})]})]}),"jobseeker"===w&&(0,a.jsxs)(s.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"space-y-4 border-l-2 border-pink-200 pl-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom complet"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",value:N,onChange:e=>S(e.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl border-2 border-gray-200 focus:border-pink-500 focus:outline-none",placeholder:"Jean Dupont"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Genre"}),(0,a.jsxs)("select",{value:C,onChange:e=>E(e.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-pink-500 focus:outline-none bg-white",children:[(0,a.jsx)("option",{value:"",children:"S\xe9lectionner..."}),(0,a.jsx)("option",{value:"Male",children:"Homme"}),(0,a.jsx)("option",{value:"Female",children:"Femme"}),(0,a.jsx)("option",{value:"Other",children:"Autre"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Domaine d'int\xe9r\xeat"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",value:Z,onChange:e=>I(e.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl border-2 border-gray-200 focus:border-pink-500 focus:outline-none",placeholder:"Data Science, Web Dev..."})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CV (PDF)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"file",accept:".pdf",onChange:e=>{var t;return _((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"w-full pl-10 pr-4 py-3 rounded-xl border-2 border-gray-200 focus:border-pink-500 focus:outline-none file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-pink-50 file:text-pink-700 hover:file:bg-pink-100"})]})]})]}),(0,a.jsxs)(s.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none transition-all duration-200 bg-white",placeholder:"votre@email.com"})]})]}),(0,a.jsxs)(s.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"password",value:r,onChange:e=>g(e.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none transition-all duration-200 bg-white",placeholder:"••••••••"})]})]}),(0,a.jsxs)(s.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6},children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmer le mot de passe"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"password",value:v,onChange:e=>j(e.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none transition-all duration-200 bg-white",placeholder:"••••••••"})]})]}),P&&(0,a.jsx)(s.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl",children:P}),(0,a.jsx)(s.E.button,{type:"submit",disabled:J||!w,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:J?"Inscription...":"S'inscrire"})]}),(0,a.jsx)(s.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"mt-6 text-center",children:(0,a.jsxs)("p",{className:"text-gray-600",children:["D\xe9j\xe0 un compte ?"," ",(0,a.jsx)(y.default,{href:"/login",className:"text-purple-600 font-semibold hover:text-purple-700 transition-colors",children:"Se connecter"})]})})]})})]})}},9116:function(e,t,r){"use strict";r.d(t,{$K:function(){return l},b5:function(){return n},uv:function(){return i}});let a=r(257).env.NEXT_PUBLIC_API_URL||"http://localhost:8000";async function i(e){let t=await fetch("".concat(a,"/api/parse-resume"),{method:"POST",body:e});if(!t.ok)throw Error("Failed to upload resume");return t.json()}async function l(e){let t=await fetch("".concat(a,"/recommend/").concat(e));if(!t.ok)throw Error("Failed to fetch recommendations");return t.json()}async function n(e){let t=await fetch("".concat(a,"/api/interactions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to save interaction");return t.json()}},4210:function(e,t,r){"use strict";r.d(t,{H:function(){return s},a:function(){return o}});var a=r(7437),i=r(2265),l=r(257);let n=(0,i.createContext)(void 0);function s(e){let{children:t}=e,[r,s]=(0,i.useState)(null),[o,c]=(0,i.useState)(!0);(0,i.useEffect)(()=>{let e=localStorage.getItem("user");e&&s(JSON.parse(e)),c(!1)},[]);let d=async(e,t)=>{try{let r=await fetch("".concat(l.env.NEXT_PUBLIC_API_URL||"http://localhost:8000","/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!r.ok)return console.error("Login failed:",await r.text()),!1;let a=await r.json(),i={id:a.id.toString(),email:a.email,role:a.role};return s(i),localStorage.setItem("user",JSON.stringify(i)),!0}catch(e){return console.error("An error occurred during login:",e),!1}},u=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"jobseeker";try{let a=await fetch("".concat(l.env.NEXT_PUBLIC_API_URL||"http://localhost:8000","/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,role:r})});if(!a.ok)return console.error("Registration failed:",await a.text()),!1;let i=await a.json(),n={id:i.id.toString(),email:i.email,role:i.role};return s(n),localStorage.setItem("user",JSON.stringify(n)),!0}catch(e){return console.error("An error occurred during registration:",e),!1}};return(0,a.jsx)(n.Provider,{value:{user:r,loading:o,login:d,register:u,logout:()=>{s(null),localStorage.removeItem("user")},setUserRole:e=>{if(r){let t={...r,role:e};s(t),localStorage.setItem("user",JSON.stringify(t));let a=JSON.parse(localStorage.getItem("users")||"[]"),i=a.findIndex(e=>e.id===r.id);-1!==i&&(a[i].role=e,localStorage.setItem("users",JSON.stringify(a)))}}},children:t})}function o(){let e=(0,i.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3389:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},8997:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},4938:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},6337:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},9345:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},1150:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("UserSearch",[["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}],["path",{d:"M10.3 15H7a4 4 0 0 0-4 4v2",key:"3bnktk"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}]])},2369:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},function(e){e.O(0,[229,941,971,117,744],function(){return e(e.s=5361)}),_N_E=e.O()}]);