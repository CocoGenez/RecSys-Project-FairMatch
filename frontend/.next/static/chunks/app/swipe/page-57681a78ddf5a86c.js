(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[731],{7690:function(e,t,i){Promise.resolve().then(i.bind(i,8865))},8865:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return v}});var s=i(7437),r=i(9376),a=i(4210),n=i(1840),o=i(8614),l=i(7586),c=i(7692),d=i(2489),u=i(8997),p=i(1906),m=i(3812),h=i(3774),x=i(4935),f=i(3389);function g(e){let{candidate:t,jobOffer:i,onSwipe:r,index:a}=e,o=(0,p.c)(0),l=(0,m.H)(o,[-200,200],[-25,25]),c=(0,m.H)(o,[-200,-100,0,100,200],[0,1,1,1,0]);return(0,s.jsx)(n.E.div,{style:{x:o,rotate:l,opacity:c,zIndex:10-a},drag:"x",dragConstraints:{left:0,right:0},dragElastic:.2,onDragEnd:(e,t)=>{Math.abs(t.offset.x)>100&&r(t.offset.x>0?"right":"left")},initial:{scale:.9,y:50},animate:{scale:1,y:0},exit:{scale:.5,opacity:0,rotate:45},transition:{type:"spring",stiffness:300,damping:30},className:"absolute w-full max-w-md h-[600px] cursor-grab active:cursor-grabbing",children:(0,s.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl h-full overflow-hidden border-2 border-gray-100",children:[t?(0,s.jsxs)("div",{className:"h-full flex flex-col",children:[(0,s.jsxs)("div",{className:"relative h-2/3 bg-gradient-to-br from-purple-400 to-pink-400",children:[(0,s.jsx)("img",{src:t.photo,alt:t.name,className:"w-full h-full object-cover"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),(0,s.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-6 text-white",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold mb-2",children:t.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-white/90",children:[(0,s.jsx)(h.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:t.location})]})]})]}),(0,s.jsxs)("div",{className:"flex-1 p-6 overflow-y-auto",children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("p",{className:"text-gray-700 leading-relaxed",children:t.bio})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 mb-3",children:[(0,s.jsx)(x.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-semibold",children:"Comp\xe9tences"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:t.skills.map((e,t)=>(0,s.jsx)("span",{className:"px-3 py-1 bg-gradient-to-r from-purple-100 to-pink-100 text-purple-700 rounded-full text-sm font-medium",children:e},t))})]})]})]}):i?(0,s.jsxs)("div",{className:"h-full flex flex-col",children:[(0,s.jsxs)("div",{className:"relative h-1/3 bg-gradient-to-br from-blue-400 to-cyan-400 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"text-8xl",children:i.logo||"\uD83D\uDCBC"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"})]}),(0,s.jsxs)("div",{className:"flex-1 p-6 overflow-y-auto",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:i.title}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 mb-4",children:[(0,s.jsx)(f.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"font-semibold",children:i.company})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 mb-4",children:[(0,s.jsx)(h.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:i.location}),i.salary&&(0,s.jsx)("span",{className:"ml-auto text-purple-600 font-semibold",children:i.salary})]}),(0,s.jsx)("p",{className:"text-gray-700 mb-4 leading-relaxed",children:i.description}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 mb-3",children:[(0,s.jsx)(x.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-semibold",children:"Comp\xe9tences requises"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:i.requiredSkills.map((e,t)=>(0,s.jsx)("span",{className:"px-3 py-1 bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-700 rounded-full text-sm font-medium",children:e},t))})]})]})]}):null,(0,s.jsx)(n.E.div,{className:"absolute top-4 left-4 p-3 bg-red-500 rounded-full shadow-lg",style:{opacity:(0,m.H)(o,[-100,-50],[1,0]),scale:(0,m.H)(o,[-100,-50],[1,0])},children:(0,s.jsx)(d.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsx)(n.E.div,{className:"absolute top-4 right-4 p-3 bg-green-500 rounded-full shadow-lg",style:{opacity:(0,m.H)(o,[50,100],[0,1]),scale:(0,m.H)(o,[50,100],[0,1])},children:(0,s.jsx)(u.Z,{className:"w-6 h-6 text-white"})})]})})}var b=i(5702),y=i(8375);function v(){let e=(0,r.useRouter)(),{logout:t}=(0,a.a)(),{items:i,user:p}=(0,b.S)(),{isAnimating:m,handleSwipe:h,currentItems:x}=(0,y.Y)(i);return p&&p.role?(0,s.jsx)("div",{className:"min-h-screen p-4 pb-24",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"recruiter"===p.role?"Trouvez des candidats":"Trouvez votre job"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(n.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>e.push("recruiter"===p.role?"/my-candidates":"/my-jobs"),className:"p-2 bg-white rounded-full shadow-lg hover:shadow-xl transition-shadow",children:(0,s.jsx)(l.Z,{className:"w-5 h-5 text-purple-600"})}),(0,s.jsx)(n.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{t(),e.replace("/")},className:"p-2 bg-white rounded-full shadow-lg hover:shadow-xl transition-shadow",children:(0,s.jsx)(c.Z,{className:"w-5 h-5 text-gray-600"})})]})]}),(0,s.jsx)("div",{className:"relative h-[600px] mb-6",children:0===x.length?(0,s.jsx)(n.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"absolute inset-0 flex items-center justify-center bg-white rounded-3xl shadow-xl",children:(0,s.jsxs)("div",{className:"text-center p-8",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDF89"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Plus de profils !"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"Vous avez parcouru tous les profils disponibles."}),(0,s.jsx)(n.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e.push("recruiter"===p.role?"/my-candidates":"/my-jobs"),className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-semibold shadow-lg",children:"Voir mes s\xe9lections"})]})}):(0,s.jsx)(o.M,{children:x.map((e,t)=>(0,s.jsx)(g,{candidate:"recruiter"===p.role?e:void 0,jobOffer:"jobseeker"===p.role?e:void 0,onSwipe:h,index:t},e.id))})}),x.length>0&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-center gap-6",children:[(0,s.jsx)(n.E.button,{whileHover:{scale:1.1,rotate:-10},whileTap:{scale:.9},onClick:()=>h("left"),disabled:m,className:"w-16 h-16 bg-white rounded-full shadow-xl flex items-center justify-center border-2 border-red-200 hover:border-red-400 transition-colors disabled:opacity-50",children:(0,s.jsx)(d.Z,{className:"w-8 h-8 text-red-500"})}),(0,s.jsx)(n.E.button,{whileHover:{scale:1.1,rotate:10},whileTap:{scale:.9},onClick:()=>h("right"),disabled:m,className:"w-16 h-16 bg-white rounded-full shadow-xl flex items-center justify-center border-2 border-green-200 hover:border-green-400 transition-colors disabled:opacity-50",children:(0,s.jsx)(u.Z,{className:"w-8 h-8 text-green-500 fill-green-500"})})]})]})}):null}},5702:function(e,t,i){"use strict";i.d(t,{S:function(){return c}});var s=i(2265),r=i(9376),a=i(4210),n=i(2510),o=i(1779),l=i(9116);function c(){let e=(0,r.useRouter)(),{user:t}=(0,a.a)(),[i,c]=(0,s.useState)([]);return(0,s.useEffect)(()=>{if(!t){e.push("/login");return}if(!t.role){e.push("/select-role");return}(async()=>{if("recruiter"===t.role){console.log("Fetching recruiter items");let e=(0,o.D3)(t.id,"candidate"),i=(0,o.Fi)(t.id,"candidate");c(n.R.filter(t=>!e.includes(t.id)&&!i.includes(t.id)))}else{console.log("Fetching jobseeker items for user:",t);try{let e=t.id;if(e&&!isNaN(parseInt(e))){console.log("Calling getRecommendations (NEW) with ID:",e);let t=await (0,l.$K)(parseInt(e));if(console.log("Got recommendations:",t),t&&t.recommendations){let e=t.recommendations.map(e=>({id:e.job_id.toString(),title:e.title,company:e.company,location:e.location,requiredSkills:e.skills,description:"Description du poste...",salary:e.salary_range,logo:"\uD83D\uDCBC"}));c(e);return}}}catch(e){console.error("Failed to fetch recommendations, falling back to mock",e)}let e=(0,o.D3)(t.id,"job"),i=(0,o.Fi)(t.id,"job");c(n.$.filter(t=>!e.includes(t.id)&&!i.includes(t.id)))}})()},[t,e]),{items:i,user:t}}},8375:function(e,t,i){"use strict";i.d(t,{Y:function(){return o}});var s=i(2265),r=i(4210),a=i(1779),n=i(9116);function o(e){let{user:t}=(0,r.a)(),[i,o]=(0,s.useState)(0),[l,c]=(0,s.useState)(!1),d=async s=>{if(l||i>=e.length)return;c(!0);let r=e[i];if(t&&r){let e="recruiter"===t.role?"candidate":"job",i="right"===s?"like":"pass";(0,a.BY)(t.id,r.id,e,i);try{let s=t.backendId;if(!s)try{let e=localStorage.getItem("user");e&&(s=JSON.parse(e).backendId)}catch(e){}s&&!isNaN(parseInt(s))&&await (0,n.b5)({user_id:s,item_id:r.id,type:e,action:i,timestamp:new Date().toISOString()})}catch(e){console.error("Failed to save interaction to backend",e)}}setTimeout(()=>{o(e=>e+1),c(!1)},300)};return{currentIndex:i,isAnimating:l,handleSwipe:d,currentItems:e.slice(i,i+3)}}},9116:function(e,t,i){"use strict";i.d(t,{$K:function(){return a},b5:function(){return n},uv:function(){return r}});let s=i(257).env.NEXT_PUBLIC_API_URL||"http://localhost:8000";async function r(e){let t=await fetch("".concat(s,"/api/parse-resume"),{method:"POST",body:e});if(!t.ok)throw Error("Failed to upload resume");return t.json()}async function a(e){let t=await fetch("".concat(s,"/recommend/").concat(e));if(!t.ok)throw Error("Failed to fetch recommendations");return t.json()}async function n(e){let t=await fetch("".concat(s,"/api/interactions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to save interaction");return t.json()}},4210:function(e,t,i){"use strict";i.d(t,{H:function(){return o},a:function(){return l}});var s=i(7437),r=i(2265),a=i(257);let n=(0,r.createContext)(void 0);function o(e){let{children:t}=e,[i,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=localStorage.getItem("user");e&&o(JSON.parse(e)),c(!1)},[]);let d=async(e,t)=>{try{let i=await fetch("".concat(a.env.NEXT_PUBLIC_API_URL||"http://localhost:8000","/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!i.ok)return console.error("Login failed:",await i.text()),!1;let s=await i.json(),r={id:s.id.toString(),email:s.email,role:s.role};return o(r),localStorage.setItem("user",JSON.stringify(r)),!0}catch(e){return console.error("An error occurred during login:",e),!1}},u=async function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"jobseeker";try{let s=await fetch("".concat(a.env.NEXT_PUBLIC_API_URL||"http://localhost:8000","/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,role:i})});if(!s.ok)return console.error("Registration failed:",await s.text()),!1;let r=await s.json(),n={id:r.id.toString(),email:r.email,role:r.role};return o(n),localStorage.setItem("user",JSON.stringify(n)),!0}catch(e){return console.error("An error occurred during registration:",e),!1}};return(0,s.jsx)(n.Provider,{value:{user:i,loading:l,login:d,register:u,logout:()=>{o(null),localStorage.removeItem("user")},setUserRole:e=>{if(i){let t={...i,role:e};o(t),localStorage.setItem("user",JSON.stringify(t));let s=JSON.parse(localStorage.getItem("users")||"[]"),r=s.findIndex(e=>e.id===i.id);-1!==r&&(s[r].role=e,localStorage.setItem("users",JSON.stringify(s)))}}},children:t})}function l(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2510:function(e,t,i){"use strict";i.d(t,{$:function(){return r},R:function(){return s}});let s=[{id:"1",name:"Sophie Martin",photo:"https://i.pravatar.cc/300?img=1",skills:["React","TypeScript","Node.js","MongoDB"],experience:"5 ans",location:"Paris, France",bio:"D\xe9veloppeuse full-stack passionn\xe9e par les technologies modernes et les interfaces utilisateur intuitives."},{id:"2",name:"Lucas Dubois",photo:"https://i.pravatar.cc/300?img=12",skills:["Python","Django","PostgreSQL","Docker"],experience:"3 ans",location:"Lyon, France",bio:"Ing\xe9nieur logiciel sp\xe9cialis\xe9 en backend, avec une forte exp\xe9rience en architecture scalable."},{id:"3",name:"Emma Bernard",photo:"https://i.pravatar.cc/300?img=5",skills:["Vue.js","Nuxt.js","GraphQL","AWS"],experience:"4 ans",location:"Toulouse, France",bio:"D\xe9veloppeuse frontend cr\xe9ative, experte en frameworks JavaScript modernes et design systems."},{id:"4",name:"Thomas Leroy",photo:"https://i.pravatar.cc/300?img=20",skills:["Java","Spring Boot","Kubernetes","Microservices"],experience:"6 ans",location:"Nantes, France",bio:"Architecte logiciel avec une expertise en syst\xe8mes distribu\xe9s et cloud computing."},{id:"5",name:"L\xe9a Moreau",photo:"https://i.pravatar.cc/300?img=9",skills:["React Native","Flutter","Firebase","CI/CD"],experience:"3 ans",location:"Bordeaux, France",bio:"D\xe9veloppeuse mobile passionn\xe9e, cr\xe9ant des applications natives et cross-platform."},{id:"6",name:"Alexandre Petit",photo:"https://i.pravatar.cc/300?img=15",skills:["Angular","RxJS","NgRx","TypeScript"],experience:"4 ans",location:"Marseille, France",bio:"D\xe9veloppeur frontend sp\xe9cialis\xe9 en Angular, avec une passion pour les architectures r\xe9actives."},{id:"7",name:"Camille Rousseau",photo:"https://i.pravatar.cc/300?img=33",skills:["Go","Rust","Distributed Systems","Blockchain"],experience:"5 ans",location:"Lille, France",bio:"Ing\xe9nieur syst\xe8me expert en langages bas niveau et technologies \xe9mergentes."},{id:"8",name:"Hugo Blanc",photo:"https://i.pravatar.cc/300?img=47",skills:["PHP","Laravel","MySQL","Redis"],experience:"4 ans",location:"Strasbourg, France",bio:"D\xe9veloppeur full-stack avec une solide exp\xe9rience en d\xe9veloppement web traditionnel et moderne."}],r=[{id:"1",title:"D\xe9veloppeur Full-Stack React/Node.js",company:"TechCorp",location:"Paris, France",requiredSkills:["React","Node.js","TypeScript","MongoDB"],description:"Rejoignez notre \xe9quipe dynamique pour d\xe9velopper des applications web modernes et innovantes.",salary:"50k-70k€",logo:"\uD83C\uDFE2"},{id:"2",title:"Ing\xe9nieur Backend Python",company:"DataFlow",location:"Lyon, France",requiredSkills:["Python","Django","PostgreSQL","Docker"],description:"Opportunit\xe9 passionnante pour construire des APIs robustes et scalables.",salary:"45k-65k€",logo:"\uD83D\uDCBC"},{id:"3",title:"D\xe9veloppeur Frontend Vue.js",company:"WebStudio",location:"Toulouse, France",requiredSkills:["Vue.js","Nuxt.js","GraphQL","AWS"],description:"Cr\xe9ez des exp\xe9riences utilisateur exceptionnelles avec les derni\xe8res technologies frontend.",salary:"48k-68k€",logo:"\uD83C\uDFA8"},{id:"4",title:"Architecte Java Spring Boot",company:"Enterprise Solutions",location:"Nantes, France",requiredSkills:["Java","Spring Boot","Kubernetes","Microservices"],description:"Concevez et impl\xe9mentez des architectures microservices \xe0 grande \xe9chelle.",salary:"60k-80k€",logo:"\uD83C\uDFDB️"},{id:"5",title:"D\xe9veloppeur Mobile React Native",company:"AppMakers",location:"Bordeaux, France",requiredSkills:["React Native","Firebase","CI/CD","TypeScript"],description:"D\xe9veloppez des applications mobiles cross-platform pour des millions d'utilisateurs.",salary:"50k-70k€",logo:"\uD83D\uDCF1"},{id:"6",title:"D\xe9veloppeur Angular Senior",company:"Frontend Pro",location:"Marseille, France",requiredSkills:["Angular","RxJS","NgRx","TypeScript"],description:"Rejoignez une \xe9quipe de d\xe9veloppeurs experts pour cr\xe9er des applications enterprise.",salary:"55k-75k€",logo:"⚡"},{id:"7",title:"Ing\xe9nieur Go/Rust",company:"Blockchain Labs",location:"Lille, France",requiredSkills:["Go","Rust","Distributed Systems","Blockchain"],description:"Travaillez sur des projets blockchain innovants avec des technologies de pointe.",salary:"65k-85k€",logo:"⛓️"},{id:"8",title:"D\xe9veloppeur PHP Laravel",company:"WebDev Agency",location:"Strasbourg, France",requiredSkills:["PHP","Laravel","MySQL","Redis"],description:"D\xe9veloppez des solutions web robustes pour des clients vari\xe9s.",salary:"42k-60k€",logo:"\uD83C\uDF10"}]},1779:function(e,t,i){"use strict";function s(e,t,i,s){let a=r(),n={userId:e,itemId:t,type:i,action:s,timestamp:Date.now()},o=a.findIndex(s=>s.userId===e&&s.itemId===t&&s.type===i);-1!==o?a[o]=n:a.push(n),localStorage.setItem("swipes",JSON.stringify(a))}function r(){return JSON.parse(localStorage.getItem("swipes")||"[]")}function a(e,t){return r().filter(i=>i.userId===e&&i.type===t&&"like"===i.action).map(e=>e.itemId)}function n(e,t){return r().filter(i=>i.userId===e&&i.type===t&&"pass"===i.action).map(e=>e.itemId)}i.d(t,{BY:function(){return s},D3:function(){return a},Fi:function(){return n}})},3389:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});let s=(0,i(9205).Z)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},4935:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});let s=(0,i(9205).Z)("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]])},3774:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});let s=(0,i(9205).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])}},function(e){e.O(0,[229,761,971,117,744],function(){return e(e.s=7690)}),_N_E=e.O()}]);