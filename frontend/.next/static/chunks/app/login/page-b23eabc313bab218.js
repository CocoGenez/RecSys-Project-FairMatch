(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{1709:function(e,t,r){Promise.resolve().then(r.bind(r,6374))},6374:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var a=r(7437),i=r(2265),n=r(9376),l=r(4210),o=r(1840),s=r(4938),c=r(2023),d=r(9345),u=r(6337),p=r(7648);function h(){let[e,t]=(0,i.useState)(""),[r,h]=(0,i.useState)(""),[m,x]=(0,i.useState)(""),[f,y]=(0,i.useState)(!1),{login:g}=(0,l.a)(),b=(0,n.useRouter)(),w=async t=>{t.preventDefault(),x(""),y(!0),await g(e,r)?b.push("/"):x("Email ou mot de passe incorrect"),y(!1)};return(0,a.jsxs)("div",{className:"min-h-screen flex items-center justify-center p-4",children:[(0,a.jsx)(o.E.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>b.push("/"),className:"fixed top-4 left-4 p-3 bg-white rounded-full shadow-lg hover:shadow-xl transition-shadow z-50",title:"Retour \xe0 l'accueil",children:(0,a.jsx)(s.Z,{className:"w-5 h-5 text-purple-600"})}),(0,a.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl p-8 border border-purple-100",children:[(0,a.jsxs)(o.E.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl mb-4 shadow-lg",children:(0,a.jsx)(c.Z,{className:"w-10 h-10 text-white"})}),(0,a.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"FairMatch"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Connectez-vous \xe0 votre compte"})]}),(0,a.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,a.jsxs)(o.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none transition-all duration-200 bg-white",placeholder:"votre@email.com"})]})]}),(0,a.jsxs)(o.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"password",value:r,onChange:e=>h(e.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none transition-all duration-200 bg-white",placeholder:"••••••••"})]})]}),m&&(0,a.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl",children:m}),(0,a.jsx)(o.E.button,{type:"submit",disabled:f,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Connexion...":"Se connecter"})]}),(0,a.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mt-6 text-center",children:(0,a.jsxs)("p",{className:"text-gray-600",children:["Pas encore de compte ?"," ",(0,a.jsx)(p.default,{href:"/register",className:"text-purple-600 font-semibold hover:text-purple-700 transition-colors",children:"S'inscrire"})]})})]})})]})}},4210:function(e,t,r){"use strict";r.d(t,{H:function(){return o},a:function(){return s}});var a=r(7437),i=r(2265),n=r(257);let l=(0,i.createContext)(void 0);function o(e){let{children:t}=e,[r,o]=(0,i.useState)(null),[s,c]=(0,i.useState)(!0);(0,i.useEffect)(()=>{let e=localStorage.getItem("user");e&&o(JSON.parse(e)),c(!1)},[]);let d=async(e,t)=>{try{let r=await fetch("".concat(n.env.NEXT_PUBLIC_API_URL||"http://localhost:8000","/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!r.ok)return console.error("Login failed:",await r.text()),!1;let a=await r.json(),i={id:a.id.toString(),email:a.email,role:a.role};return o(i),localStorage.setItem("user",JSON.stringify(i)),!0}catch(e){return console.error("An error occurred during login:",e),!1}},u=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"jobseeker";try{let a=await fetch("".concat(n.env.NEXT_PUBLIC_API_URL||"http://localhost:8000","/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,role:r})});if(!a.ok)return console.error("Registration failed:",await a.text()),!1;let i=await a.json(),l={id:i.id.toString(),email:i.email,role:i.role};return o(l),localStorage.setItem("user",JSON.stringify(l)),!0}catch(e){return console.error("An error occurred during registration:",e),!1}};return(0,a.jsx)(l.Provider,{value:{user:r,loading:s,login:d,register:u,logout:()=>{o(null),localStorage.removeItem("user")},setUserRole:e=>{if(r){let t={...r,role:e};o(t),localStorage.setItem("user",JSON.stringify(t));let a=JSON.parse(localStorage.getItem("users")||"[]"),i=a.findIndex(e=>e.id===r.id);-1!==i&&(a[i].role=e,localStorage.setItem("users",JSON.stringify(a)))}}},children:t})}function s(){let e=(0,i.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4938:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},6337:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},9345:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])}},function(e){e.O(0,[229,941,971,117,744],function(){return e(e.s=1709)}),_N_E=e.O()}]);