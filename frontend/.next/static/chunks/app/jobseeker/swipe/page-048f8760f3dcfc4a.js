(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[187],{6221:function(e,t,i){Promise.resolve().then(i.bind(i,9833))},9833:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return v}});var s=i(7437),r=i(2265),a=i(9376),n=i(4210),o=i(1840),l=i(8614),c=i(7586),d=i(9397),u=i(7692),p=i(2489),h=i(8997),m=i(6216),x=i(1906),g=i(3812);function f(e){let{job:t,onSwipe:i,onJobClick:a,index:n}=e,l=(0,x.c)(0),c=(0,g.H)(l,[-200,200],[-25,25]),d=(0,g.H)(l,[-200,-100,0,100,200],[0,1,1,1,0]),[u,m]=(0,r.useState)(!1);return(0,s.jsxs)(o.E.div,{style:{x:l,rotate:c,opacity:d,zIndex:10-n},drag:"x",dragConstraints:{left:-300,right:300},dragElastic:.2,onDragStart:()=>{m(!0)},onDragEnd:(e,t)=>{Math.abs(t.offset.x)>100?i(t.offset.x>0?"right":"left"):l.set(0),setTimeout(()=>m(!1),100)},whileDrag:{cursor:"grabbing"},initial:{scale:.9,y:50},animate:{scale:1,y:0},exit:{scale:.5,opacity:0,rotate:45},transition:{type:"spring",stiffness:300,damping:30},className:"absolute w-full max-w-sm h-[600px] cursor-grab active:cursor-grabbing",onClick:e=>{e.stopPropagation(),!u&&10>Math.abs(l.get())&&a(t)},children:[(0,s.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl h-full overflow-hidden border-2 border-gray-100 flex flex-col",children:[(0,s.jsx)("div",{className:"relative h-32 bg-gradient-to-br from-blue-400 to-cyan-400 flex items-center justify-center pt-4",children:(0,s.jsx)("div",{className:"text-6xl",children:"\uD83D\uDCBC"})}),(0,s.jsxs)("div",{className:"flex-1 p-6 flex flex-col",children:[(0,s.jsxs)("div",{className:"text-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-2 line-clamp-2",children:t.title}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 text-gray-600 text-sm",children:[(0,s.jsx)("span",{className:"font-semibold",children:t.company}),(0,s.jsx)("span",{children:"•"}),(0,s.jsx)("span",{children:t.location})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wide",children:"Qualit\xe9s requises"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1.5 justify-center",children:t.requiredQualities&&t.requiredQualities.length>0?(0,s.jsxs)(s.Fragment,{children:[t.requiredQualities.slice(0,3).map((e,t)=>(0,s.jsx)("span",{className:"px-2.5 py-1 bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-700 rounded-full text-xs font-medium",children:e},t)),t.requiredQualities.length>3&&(0,s.jsxs)("span",{className:"px-2.5 py-1 bg-gray-100 text-gray-600 rounded-full text-xs font-medium",children:["+",t.requiredQualities.length-3]})]}):(0,s.jsx)("span",{className:"text-gray-500 text-xs",children:"Aucune qualit\xe9 sp\xe9cifi\xe9e"})})]})]})]}),(0,s.jsx)(o.E.div,{className:"absolute top-4 left-4 p-3 bg-red-500 rounded-full shadow-lg",style:{opacity:(0,g.H)(l,[-100,-50],[1,0]),scale:(0,g.H)(l,[-100,-50],[1,0])},children:(0,s.jsx)(p.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsx)(o.E.div,{className:"absolute top-4 right-4 p-3 bg-green-500 rounded-full shadow-lg",style:{opacity:(0,g.H)(l,[50,100],[0,1]),scale:(0,g.H)(l,[50,100],[0,1])},children:(0,s.jsx)(h.Z,{className:"w-6 h-6 text-white"})})]})}var b=i(5702),y=i(8375);function v(){let e=(0,a.useRouter)(),{user:t,logout:i}=(0,n.a)(),{items:x}=(0,b.S)(),{isAnimating:g,handleSwipe:v,currentItems:j,currentIndex:k}=(0,y.Y)(x);console.log("SwipePage render:",{totalItems:x.length,currentItemsLength:j.length,currentIndex:k});let[w,N]=(0,r.useState)(null),[D,S]=(0,r.useState)(!1),F=j.map(e=>({id:e.id,recruiterId:"0",title:e.title,company:e.company,location:e.location,objectives:e.description,startDate:"D\xe8s que possible",requiredQualities:e.requiredSkills||[],descriptionType:"text",description:e.description,createdAt:Date.now()})),C=e=>{N(e),S(!0)};return t&&"jobseeker"===t.role?(0,s.jsxs)("div",{className:"min-h-screen p-4 pb-24",children:[(0,s.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,s.jsxs)(o.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Trouvez votre job"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(o.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>e.push("/jobseeker/my-jobs"),className:"p-2 bg-white rounded-full shadow-lg hover:shadow-xl transition-shadow",title:"Mes offres retenues",children:(0,s.jsx)(c.Z,{className:"w-5 h-5 text-purple-600"})}),(0,s.jsx)(o.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>e.push("/jobseeker/add-cv"),className:"p-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full shadow-lg hover:shadow-xl transition-shadow",title:"Ajouter mon CV",children:(0,s.jsx)(d.Z,{className:"w-4 h-4"})})]}),(0,s.jsx)(o.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{i(),e.replace("/")},className:"p-2 bg-white rounded-full shadow-lg hover:shadow-xl transition-shadow",children:(0,s.jsx)(u.Z,{className:"w-5 h-5 text-gray-600"})})]})]}),(0,s.jsx)("div",{className:"relative h-[600px] mb-6 flex items-center justify-center",children:0===F.length?(0,s.jsx)(o.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"absolute inset-0 flex items-center justify-center bg-white rounded-3xl shadow-xl",children:(0,s.jsxs)("div",{className:"text-center p-8",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDF89"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Plus d'offres !"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"Vous avez parcouru toutes les offres disponibles."}),(0,s.jsx)(o.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e.push("/jobseeker/my-jobs"),className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full font-semibold shadow-lg",children:"Voir mes offres retenues"})]})}):(0,s.jsx)(l.M,{children:F.map((e,t)=>(0,s.jsx)(f,{job:e,onSwipe:v,onJobClick:C,index:t},e.id))})}),F.length>0&&(0,s.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-center gap-6",children:[(0,s.jsx)(o.E.button,{whileHover:{scale:1.1,rotate:-10},whileTap:{scale:.9},onClick:()=>v("left"),disabled:g,className:"w-16 h-16 bg-white rounded-full shadow-xl flex items-center justify-center border-2 border-red-200 hover:border-red-400 transition-colors disabled:opacity-50",children:(0,s.jsx)(p.Z,{className:"w-8 h-8 text-red-500"})}),(0,s.jsx)(o.E.button,{whileHover:{scale:1.1,rotate:10},whileTap:{scale:.95},onClick:()=>v("right"),disabled:g,className:"w-16 h-16 bg-white rounded-full shadow-xl flex items-center justify-center border-2 border-green-200 hover:border-green-400 transition-colors disabled:opacity-50",children:(0,s.jsx)(h.Z,{className:"w-8 h-8 text-green-500 fill-green-500"})})]})]}),(0,s.jsx)(m.Z,{job:w,isOpen:D,onClose:()=>S(!1)})]}):null}},5702:function(e,t,i){"use strict";i.d(t,{S:function(){return c}});var s=i(2265),r=i(9376),a=i(4210),n=i(2510),o=i(1779),l=i(9116);function c(){let e=(0,r.useRouter)(),{user:t}=(0,a.a)(),[i,c]=(0,s.useState)([]);return(0,s.useEffect)(()=>{if(!t){e.push("/login");return}if(!t.role){e.push("/select-role");return}(async()=>{if("recruiter"===t.role){console.log("Fetching recruiter items");let e=(0,o.D3)(t.id,"candidate"),i=(0,o.Fi)(t.id,"candidate");c(n.R.filter(t=>!e.includes(t.id)&&!i.includes(t.id)))}else{console.log("Fetching jobseeker items for user:",t);try{let e=t.id;if(e&&!isNaN(parseInt(e))){console.log("Calling getRecommendations (NEW) with ID:",e);let t=await (0,l.$K)(parseInt(e));if(console.log("Got recommendations:",t),t&&t.recommendations){let e=t.recommendations.map(e=>({id:e.job_id.toString(),title:e.title,company:e.company,location:e.location,requiredSkills:e.skills,description:"Description du poste...",salary:e.salary_range,logo:"\uD83D\uDCBC"}));c(e);return}}}catch(e){console.error("Failed to fetch recommendations, falling back to mock",e)}let e=(0,o.D3)(t.id,"job"),i=(0,o.Fi)(t.id,"job");c(n.$.filter(t=>!e.includes(t.id)&&!i.includes(t.id)))}})()},[t,e]),{items:i,user:t}}},8375:function(e,t,i){"use strict";i.d(t,{Y:function(){return o}});var s=i(2265),r=i(4210),a=i(1779),n=i(9116);function o(e){let{user:t}=(0,r.a)(),[i,o]=(0,s.useState)(0),[l,c]=(0,s.useState)(!1),d=async s=>{if(l||i>=e.length)return;c(!0);let r=e[i];if(t&&r){let e="recruiter"===t.role?"candidate":"job",i="right"===s?"like":"pass";(0,a.BY)(t.id,r.id,e,i);try{let s=t.backendId;if(!s)try{let e=localStorage.getItem("user");e&&(s=JSON.parse(e).backendId)}catch(e){}s&&!isNaN(parseInt(s))&&await (0,n.b5)({user_id:s,item_id:r.id,type:e,action:i,timestamp:new Date().toISOString()})}catch(e){console.error("Failed to save interaction to backend",e)}}setTimeout(()=>{o(e=>e+1),c(!1)},300)};return{currentIndex:i,isAnimating:l,handleSwipe:d,currentItems:e.slice(i,i+3)}}},9116:function(e,t,i){"use strict";i.d(t,{$K:function(){return a},b5:function(){return n},uv:function(){return r}});let s=i(257).env.NEXT_PUBLIC_API_URL||"http://localhost:8000";async function r(e){let t=await fetch("".concat(s,"/api/parse-resume"),{method:"POST",body:e});if(!t.ok)throw Error("Failed to upload resume");return t.json()}async function a(e){let t=await fetch("".concat(s,"/recommend/").concat(e));if(!t.ok)throw Error("Failed to fetch recommendations");return t.json()}async function n(e){let t=await fetch("".concat(s,"/api/interactions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to save interaction");return t.json()}},2510:function(e,t,i){"use strict";i.d(t,{$:function(){return r},R:function(){return s}});let s=[{id:"1",name:"Sophie Martin",photo:"https://i.pravatar.cc/300?img=1",skills:["React","TypeScript","Node.js","MongoDB"],experience:"5 ans",location:"Paris, France",bio:"D\xe9veloppeuse full-stack passionn\xe9e par les technologies modernes et les interfaces utilisateur intuitives."},{id:"2",name:"Lucas Dubois",photo:"https://i.pravatar.cc/300?img=12",skills:["Python","Django","PostgreSQL","Docker"],experience:"3 ans",location:"Lyon, France",bio:"Ing\xe9nieur logiciel sp\xe9cialis\xe9 en backend, avec une forte exp\xe9rience en architecture scalable."},{id:"3",name:"Emma Bernard",photo:"https://i.pravatar.cc/300?img=5",skills:["Vue.js","Nuxt.js","GraphQL","AWS"],experience:"4 ans",location:"Toulouse, France",bio:"D\xe9veloppeuse frontend cr\xe9ative, experte en frameworks JavaScript modernes et design systems."},{id:"4",name:"Thomas Leroy",photo:"https://i.pravatar.cc/300?img=20",skills:["Java","Spring Boot","Kubernetes","Microservices"],experience:"6 ans",location:"Nantes, France",bio:"Architecte logiciel avec une expertise en syst\xe8mes distribu\xe9s et cloud computing."},{id:"5",name:"L\xe9a Moreau",photo:"https://i.pravatar.cc/300?img=9",skills:["React Native","Flutter","Firebase","CI/CD"],experience:"3 ans",location:"Bordeaux, France",bio:"D\xe9veloppeuse mobile passionn\xe9e, cr\xe9ant des applications natives et cross-platform."},{id:"6",name:"Alexandre Petit",photo:"https://i.pravatar.cc/300?img=15",skills:["Angular","RxJS","NgRx","TypeScript"],experience:"4 ans",location:"Marseille, France",bio:"D\xe9veloppeur frontend sp\xe9cialis\xe9 en Angular, avec une passion pour les architectures r\xe9actives."},{id:"7",name:"Camille Rousseau",photo:"https://i.pravatar.cc/300?img=33",skills:["Go","Rust","Distributed Systems","Blockchain"],experience:"5 ans",location:"Lille, France",bio:"Ing\xe9nieur syst\xe8me expert en langages bas niveau et technologies \xe9mergentes."},{id:"8",name:"Hugo Blanc",photo:"https://i.pravatar.cc/300?img=47",skills:["PHP","Laravel","MySQL","Redis"],experience:"4 ans",location:"Strasbourg, France",bio:"D\xe9veloppeur full-stack avec une solide exp\xe9rience en d\xe9veloppement web traditionnel et moderne."}],r=[{id:"1",title:"D\xe9veloppeur Full-Stack React/Node.js",company:"TechCorp",location:"Paris, France",requiredSkills:["React","Node.js","TypeScript","MongoDB"],description:"Rejoignez notre \xe9quipe dynamique pour d\xe9velopper des applications web modernes et innovantes.",salary:"50k-70k€",logo:"\uD83C\uDFE2"},{id:"2",title:"Ing\xe9nieur Backend Python",company:"DataFlow",location:"Lyon, France",requiredSkills:["Python","Django","PostgreSQL","Docker"],description:"Opportunit\xe9 passionnante pour construire des APIs robustes et scalables.",salary:"45k-65k€",logo:"\uD83D\uDCBC"},{id:"3",title:"D\xe9veloppeur Frontend Vue.js",company:"WebStudio",location:"Toulouse, France",requiredSkills:["Vue.js","Nuxt.js","GraphQL","AWS"],description:"Cr\xe9ez des exp\xe9riences utilisateur exceptionnelles avec les derni\xe8res technologies frontend.",salary:"48k-68k€",logo:"\uD83C\uDFA8"},{id:"4",title:"Architecte Java Spring Boot",company:"Enterprise Solutions",location:"Nantes, France",requiredSkills:["Java","Spring Boot","Kubernetes","Microservices"],description:"Concevez et impl\xe9mentez des architectures microservices \xe0 grande \xe9chelle.",salary:"60k-80k€",logo:"\uD83C\uDFDB️"},{id:"5",title:"D\xe9veloppeur Mobile React Native",company:"AppMakers",location:"Bordeaux, France",requiredSkills:["React Native","Firebase","CI/CD","TypeScript"],description:"D\xe9veloppez des applications mobiles cross-platform pour des millions d'utilisateurs.",salary:"50k-70k€",logo:"\uD83D\uDCF1"},{id:"6",title:"D\xe9veloppeur Angular Senior",company:"Frontend Pro",location:"Marseille, France",requiredSkills:["Angular","RxJS","NgRx","TypeScript"],description:"Rejoignez une \xe9quipe de d\xe9veloppeurs experts pour cr\xe9er des applications enterprise.",salary:"55k-75k€",logo:"⚡"},{id:"7",title:"Ing\xe9nieur Go/Rust",company:"Blockchain Labs",location:"Lille, France",requiredSkills:["Go","Rust","Distributed Systems","Blockchain"],description:"Travaillez sur des projets blockchain innovants avec des technologies de pointe.",salary:"65k-85k€",logo:"⛓️"},{id:"8",title:"D\xe9veloppeur PHP Laravel",company:"WebDev Agency",location:"Strasbourg, France",requiredSkills:["PHP","Laravel","MySQL","Redis"],description:"D\xe9veloppez des solutions web robustes pour des clients vari\xe9s.",salary:"42k-60k€",logo:"\uD83C\uDF10"}]},1779:function(e,t,i){"use strict";function s(e,t,i,s){let a=r(),n={userId:e,itemId:t,type:i,action:s,timestamp:Date.now()},o=a.findIndex(s=>s.userId===e&&s.itemId===t&&s.type===i);-1!==o?a[o]=n:a.push(n),localStorage.setItem("swipes",JSON.stringify(a))}function r(){return JSON.parse(localStorage.getItem("swipes")||"[]")}function a(e,t){return r().filter(i=>i.userId===e&&i.type===t&&"like"===i.action).map(e=>e.itemId)}function n(e,t){return r().filter(i=>i.userId===e&&i.type===t&&"pass"===i.action).map(e=>e.itemId)}i.d(t,{BY:function(){return s},D3:function(){return a},Fi:function(){return n}})},9397:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});let s=(0,i(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}},function(e){e.O(0,[229,761,746,971,117,744],function(){return e(e.s=6221)}),_N_E=e.O()}]);